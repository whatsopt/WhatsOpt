<h1>Design Projects</h1>

<p>
<table class="table table-striped">

  <thead>
    <tr>
      <th style="10%">Name</th>
      <th style="10%">Owner</th>
      <th style="30%">Description</th>
      <th style="30%">Analysis</th>
      <th style="20%">Actions</th>
    </tr>
  </thead>

  <tbody>
    <% @packages.each do |pkg| %>
    <tr>
      <%# <td><%= pkg %></td>
      <td><%= pkg.owner.login %></td>
      <td><%= pkg.description %></td>
      <td><%= link_to_analyses_if_authorized(project) %>
        <% unless project.analyses.roots.empty? %>
        <%= link_to design_project_path(project), 
                class: "btn btn-sm", title: "List Analyses" do %>
        <i class="fas fa-ellipsis-v"></i>
        <% end %>
        <% end %>
      </td>
      <td>
        <% if policy(project).update? %>
        <%= link_to edit_design_project_path(project), 
            class: "btn btn-sm", title: "Edit" do %>
        <i class="fas fa-edit"></i>
        <% end %>
        <% end %>
        <% if policy(project).destroy? %>
        <%= link_to design_project_path(project), method: :delete, 
              data: { confirm: "Remove #{project.name} design project?" }, 
              class: "btn btn-sm text-danger", title:"Delete" do %>
        <i class="fas fa-times"></i>
        <% end %>
        <% end %>
      </td> %>
    </tr>
    <% end %>
  </tbody>
</table>
</p>